[tox]
envlist = 
    py36,
    py37,
    docs,
    linting,
    coverage

[testenv]
deps = -rrequirements.txt
commands=pytest

[testenv:docs]
changedir = docs
deps = -r{toxinidir}/requirements.txt
       -r{toxinidir}/requirements_docs.txt
commands =
    sphinx-build -W -b html -d {envtmpdir}/doctrees . {envtmpdir}/html

[testenv:linting]
deps = -r{toxinidir}/requirements.txt
       -r{toxinidir}/requirements_docs.txt
       -r{toxinidir}/requirements_dev.txt
commands=pylint jmopenorders

[testenv:coverage]
deps = -r{toxinidir}/requirements.txt
       -r{toxinidir}/requirements_dev.txt
commands =
    coverage run --source=jmopenorders,tests -m unittest discover -s tests/
    coverage html
    coverage report

[flake8]
ignore = E501,W503,W504
exclude = venv,build,.tox,setup.py
max-line-length = 120
